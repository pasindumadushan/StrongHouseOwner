@model IEnumerable<StrongHouseOwner.Data.EntityModel.TypeOfCeilingSample>

@{
    ViewBag.Title = "Samples";
}
<html>
<head>
    <link href="~/maxcdn/css/bootstrap.min.css" rel="stylesheet" />
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
</head>
<body>


    <div class="container">
        <div class="row">

            <div class="col-md-12">
                <h4>Samples</h4>
                <div class="table-responsive">

                    <p>
                        @Html.ActionLink("Create Sample", "CreateSample", new { refCeilingTypeId = ViewBag.ViewBagRefCeilingTypeId })
                    </p>
                    <table id="mytable" class="table table-bordred table-striped">

                        <thead>
                        <th></th>
                        <th>Code</th>
                        <th>Name</th>
                        <th>Size</th>
                        <th>Price</th>
                        <th>Image</th>
                        <th></th>
                        <th></th>
                        </thead>

                        <tbody class="thead-light">
                            @{int i = 0;}

                            @foreach (var item in Model)
                            {

                                <tr>
                                    <td scope="row">@(i = i + 1)</td>
                                    <td>@item.CeilingTypeSampleCode</td>

                                    <td>@item.CeilingTypeSampleName</td>

                                    <td><table><td>@item.CeilingTypeSampleSizeHeight</td><td> x</td><td>@item.CeilingTypeSampleSizeWidth</td><td> ''</td></table></td>

                                    <td>@item.CeilingTypeSamplePrice</td>
                                    <td></td>

                                    <td>
                                        <p data-placement="top" data-toggle="tooltip" title="Delete">
                                            <button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-id="@item.CeilingTypeSampleId" onclick="location.href='@Url.Action("DeleteSample", "Ceiling",new { CeilingSampleId = item.CeilingTypeSampleId, CeilingTypeId = @ViewBag.ViewBagRefCeilingTypeId})'"><span class="glyphicon glyphicon-trash"></span></button>
                                        </p>
                                    </td>

                                </tr>

                            }
                        </tbody>

                    </table>
                    <div class="clearfix"></div>

                </div>

            </div>
        </div>
    </div>
    <span class="glyphicon glyphicon-pencil">
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true" data-backdrop="false">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" id="btnSubmitClose" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                        <h4 class="modal-title custom_align" id="Heading">Delete this entry</h4>
                    </div>
                    <div class="modal-body">

                        <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Are you sure you want to delete @ViewBag.CeilingTypeSampleName?</div>

                    </div>
                    <div class="modal-footer ">
                        <button type="button" class="btn btn-success" id="btnSubmitDelete"><span class="glyphicon glyphicon-ok-sign"></span> Yes</button>
                        <button type="button" id="btnSubmitNo" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> No</button>
                    </div>
                </div>
            </div>
        </div>
    </span>
</body>
</html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
<script type="text/javascript">
    $(window).on('load', function () {
        $('#myModal').modal('show');
    });
    $(document).ready(function ()
    {

        $("#btnSubmitDelete").click(function ()
        {
            getData();
        });
        $("#btnSubmitClose").click(function ()
        {
            window.location.href = "/Ceiling/Samples?CeilingTypeId=@ViewBag.ViewBagRefCeilingTypeId"
        });
        $("#btnSubmitNo").click(function ()
        {
            window.location.href = "/Ceiling/Samples?CeilingTypeId=@ViewBag.ViewBagRefCeilingTypeId"
        });

    });


    function getData()
    {

        var DeleteSample = new FormData();

        DeleteSample.append("Ceiling_Type_Sample_Id", @ViewBag.CeilingTypeSampleId);
        DeleteSample.append("Shop_Ref_Id", ("@ViewBag.ShopRefId"));
        DeleteSample.append("Ceiling_Type_Sample_Code", ("@ViewBag.CeilingTypeSampleCode"));
        DeleteSample.append("Ceiling_Type_Sample_Name", ("@ViewBag.CeilingTypeSampleName"));

        $.ajax({
                    type: 'POST',
                    data: DeleteSample,
                    url:'@Url.Action("DeleteSampleConfirm","Ceiling")',
                    dataType: 'json',
                    contentType: false, // NEEDED, DON'T OMIT THIS (requires jQuery 1.6+)
                    processData: false, // NEEDED, DON'T OMIT THIS
                    //cache: false,
                    success: function (data)
                    {

                        if (data.success != null || data.success != "")
                        {
                            window.location.href = "/Ceiling/Samples?CeilingTypeId=@ViewBag.ViewBagRefCeilingTypeId"
                        }


                    },
                    error: function (response)
                    {

                        alert("error!");  //

                    }
               });

    }

</script>
